"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7508],{5641:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"inferflow/v1.0.0/functionalities","title":"Key Functionalities","description":"Overview","source":"@site/docs/inferflow/v1.0.0/functionalities.md","sourceDirName":"inferflow/v1.0.0","slug":"/inferflow/v1.0.0/functionalities","permalink":"/BharatMLStack/inferflow/v1.0.0/functionalities","draft":false,"unlisted":false,"editUrl":"https://github.com/Meesho/BharatMLStack/tree/main/docs/docs/inferflow/v1.0.0/functionalities.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Key Functionalities","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Architecture","permalink":"/BharatMLStack/inferflow/v1.0.0/architecture"},"next":{"title":"Configuration Guide","permalink":"/BharatMLStack/inferflow/v1.0.0/configuration"}}');var s=i(4848),t=i(8453);const l={title:"Key Functionalities",sidebar_position:2},o="Inferflow - Key Functionalities",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Core Capabilities",id:"core-capabilities",level:2},{value:"Graph-Driven Feature Retrieval",id:"graph-driven-feature-retrieval",level:3},{value:"DAG Topology Executor",id:"dag-topology-executor",level:3},{value:"Multi-Pattern Inference APIs",id:"multi-pattern-inference-apis",level:2},{value:"PointWise Inference",id:"pointwise-inference",level:3},{value:"PairWise Inference",id:"pairwise-inference",level:3},{value:"SlateWise Inference",id:"slatewise-inference",level:3},{value:"Entity &amp; Legacy API",id:"entity--legacy-api",level:2},{value:"RetrieveModelScore",id:"retrievemodelscore",level:3},{value:"Component Types",id:"component-types",level:2},{value:"FeatureInitComponent",id:"featureinitcomponent",level:3},{value:"FeatureComponent",id:"featurecomponent",level:3},{value:"PredatorComponent",id:"predatorcomponent",level:3},{value:"NumerixComponent",id:"numerixcomponent",level:3},{value:"Feature Retrieval Pipeline",id:"feature-retrieval-pipeline",level:2},{value:"Key Resolution",id:"key-resolution",level:3},{value:"Batched Retrieval",id:"batched-retrieval",level:3},{value:"In-Memory Caching",id:"in-memory-caching",level:3},{value:"Data Types",id:"data-types",level:2},{value:"Inference Logging",id:"inference-logging",level:2},{value:"Serialization Formats",id:"serialization-formats",level:3},{value:"Sampling Controls",id:"sampling-controls",level:3},{value:"Log Content",id:"log-content",level:3},{value:"Configuration Hot-Reload",id:"configuration-hot-reload",level:2},{value:"Performance Characteristics",id:"performance-characteristics",level:2},{value:"Concurrency Model",id:"concurrency-model",level:3},{value:"Memory Efficiency",id:"memory-efficiency",level:3},{value:"Serialization",id:"serialization",level:3},{value:"Contributing",id:"contributing",level:2},{value:"Community &amp; Support",id:"community--support",level:2},{value:"License",id:"license",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"inferflow---key-functionalities",children:"Inferflow - Key Functionalities"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["Inferflow is a high-performance, config-driven ML inference orchestration engine built in ",(0,s.jsx)(n.strong,{children:"Go"}),". It provides ",(0,s.jsx)(n.strong,{children:"no-code feature retrieval"}),", ",(0,s.jsx)(n.strong,{children:"DAG-based execution"}),", and ",(0,s.jsx)(n.strong,{children:"multi-pattern model inference"})," \u2014 enabling ML teams to onboard new models through configuration changes alone."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"core-capabilities",children:"Core Capabilities"}),"\n",(0,s.jsx)(n.h3,{id:"graph-driven-feature-retrieval",children:"Graph-Driven Feature Retrieval"}),"\n",(0,s.jsx)(n.p,{children:"Inferflow's defining feature is its ability to resolve entity relationships and retrieve features through configurable DAG topologies \u2014 no custom code required."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"How it works:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.code,{children:"model_config_id"})," maps to a pre-defined DAG of components"]}),"\n",(0,s.jsxs)(n.li,{children:["Context entity IDs (e.g., ",(0,s.jsx)(n.code,{children:"userId"}),", ",(0,s.jsx)(n.code,{children:"productIds"}),") are provided at request time"]}),"\n",(0,s.jsxs)(n.li,{children:["The DAG resolves intermediate entity relationships (e.g., extracting ",(0,s.jsx)(n.code,{children:"category"})," from ",(0,s.jsx)(n.code,{children:"product"})," to fetch ",(0,s.jsx)(n.code,{children:"user x category"})," features)"]}),"\n",(0,s.jsx)(n.li,{children:"Features are fetched in parallel from the Online Feature Store"}),"\n",(0,s.jsx)(n.li,{children:"A 2D feature matrix is assembled and passed to model scoring"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Impact:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"New models require only a config update \u2014 no code changes"}),"\n",(0,s.jsx)(n.li,{children:"Feature consistency is guaranteed across experiments"}),"\n",(0,s.jsx)(n.li,{children:"Iteration cycles drop from days to minutes"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"dag-topology-executor",children:"DAG Topology Executor"}),"\n",(0,s.jsxs)(n.p,{children:["The execution engine uses ",(0,s.jsx)(n.strong,{children:"Kahn's algorithm"})," for topological ordering with ",(0,s.jsx)(n.strong,{children:"concurrent goroutine execution"})," at each level:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'component_dependency: {\n    "feature_initializer": ["fs_user", "fs_product"],\n    "fs_user": ["ranker"],\n    "fs_product": ["ranker"],\n    "ranker": ["reranker"],\n    "reranker": []\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"This config defines:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"feature_initializer"})," runs first (zero in-degree)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"fs_user"})," and ",(0,s.jsx)(n.code,{children:"fs_product"})," run ",(0,s.jsx)(n.strong,{children:"in parallel"})," after init"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ranker"})," runs after both feature components complete"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"reranker"})," runs after the ranker"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key properties:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Cycle detection via in-degree analysis"}),"\n",(0,s.jsx)(n.li,{children:"DAG topologies cached using Murmur3 hashing (Ristretto cache)"}),"\n",(0,s.jsxs)(n.li,{children:["Components are registered and resolved via a ",(0,s.jsx)(n.code,{children:"ComponentProvider"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"multi-pattern-inference-apis",children:"Multi-Pattern Inference APIs"}),"\n",(0,s.jsxs)(n.p,{children:["Inferflow supports three inference patterns via the ",(0,s.jsx)(n.strong,{children:"Predict API"}),", each designed for different ML use cases:"]}),"\n",(0,s.jsx)(n.h3,{id:"pointwise-inference",children:"PointWise Inference"}),"\n",(0,s.jsx)(n.p,{children:"Score each target independently against context features."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-protobuf",children:"rpc InferPointWise(PredictRequest) returns (PredictResponse);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use cases:"})," Click-through rate prediction, fraud scoring, relevance ranking"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Input:"})," Context features + list of targets (e.g., products)\n",(0,s.jsx)(n.strong,{children:"Output:"})," Per-target scores"]}),"\n",(0,s.jsx)(n.h3,{id:"pairwise-inference",children:"PairWise Inference"}),"\n",(0,s.jsx)(n.p,{children:"Score pairs of targets relative to each other."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-protobuf",children:"rpc InferPairWise(PredictRequest) returns (PredictResponse);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use cases:"})," Preference learning, comparison-based ranking"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Input:"})," Context features + targets + pair indices (first/second)\n",(0,s.jsx)(n.strong,{children:"Output:"})," Per-pair scores + optional per-target scores"]}),"\n",(0,s.jsx)(n.h3,{id:"slatewise-inference",children:"SlateWise Inference"}),"\n",(0,s.jsx)(n.p,{children:"Score groups (slates) of targets together, capturing inter-item effects."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-protobuf",children:"rpc InferSlateWise(PredictRequest) returns (PredictResponse);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use cases:"})," Whole-page optimization, slate-level reranking, diversity-aware scoring"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Input:"})," Context features + targets + slate definitions (target indices per slate)\n",(0,s.jsx)(n.strong,{children:"Output:"})," Per-slate scores + optional per-target scores"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"entity--legacy-api",children:"Entity & Legacy API"}),"\n",(0,s.jsx)(n.h3,{id:"retrievemodelscore",children:"RetrieveModelScore"}),"\n",(0,s.jsx)(n.p,{children:"The original Inferflow API for entity-based feature retrieval and scoring:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-protobuf",children:"service Inferflow {\n    rpc RetrieveModelScore(InferflowRequestProto) returns (InferflowResponseProto);\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Request structure:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"entities"})}),(0,s.jsx)(n.td,{children:"List of entity types with their IDs and optional inline features"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"model_config_id"})}),(0,s.jsx)(n.td,{children:"Identifies the model configuration (DAG, components, response format)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"tracking_id"})}),(0,s.jsx)(n.td,{children:"Request-level tracing identifier"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Entity structure:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"entity"}),": Entity type label (e.g., ",(0,s.jsx)(n.code,{children:'"user"'}),", ",(0,s.jsx)(n.code,{children:'"product"'}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ids"}),": List of entity IDs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"features"}),": Optional inline features (name + per-ID values)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"component-types",children:"Component Types"}),"\n",(0,s.jsx)(n.h3,{id:"featureinitcomponent",children:"FeatureInitComponent"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Role:"})," Root DAG node \u2014 initializes the shared ",(0,s.jsx)(n.code,{children:"ComponentMatrix"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sets up rows from entity IDs"}),"\n",(0,s.jsx)(n.li,{children:"Populates schema columns (string + byte) for all downstream components"}),"\n",(0,s.jsxs)(n.li,{children:["For slate APIs: initializes ",(0,s.jsx)(n.code,{children:"SlateData"})," with ",(0,s.jsx)(n.code,{children:"slate_target_indices"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"featurecomponent",children:"FeatureComponent"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Role:"})," Fetches features from the Online Feature Store (OnFS) for a specific entity type."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Reads ",(0,s.jsx)(n.code,{children:"FSKeys"})," from config to extract lookup keys from the matrix"]}),"\n",(0,s.jsx)(n.li,{children:"Batches unique entities and calls OnFS via gRPC"}),"\n",(0,s.jsxs)(n.li,{children:["Optional ",(0,s.jsx)(n.strong,{children:"in-memory caching"})," keyed by ",(0,s.jsx)(n.code,{children:"model_id:version:component:entity"})]}),"\n",(0,s.jsx)(n.li,{children:"Writes binary feature values into matrix byte columns"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Column naming convention:"})," ",(0,s.jsx)(n.code,{children:"entity_label:feature_group:feature_name"})]}),"\n",(0,s.jsx)(n.h3,{id:"predatorcomponent",children:"PredatorComponent"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Role:"})," Calls model serving endpoints for inference."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Builds feature payloads from matrix columns with type conversion"}),"\n",(0,s.jsxs)(n.li,{children:["Supports ",(0,s.jsx)(n.strong,{children:"percentage-based traffic routing"})," across multiple model endpoints"]}),"\n",(0,s.jsxs)(n.li,{children:["Handles ",(0,s.jsx)(n.strong,{children:"slate-level inference"}),": per-slate matrix \u2192 separate inference \u2192 scores to ",(0,s.jsx)(n.code,{children:"SlateData"})]}),"\n",(0,s.jsxs)(n.li,{children:["Configurable ",(0,s.jsx)(n.strong,{children:"calibration"})," and ",(0,s.jsx)(n.strong,{children:"batch sizing"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"numerixcomponent",children:"NumerixComponent"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Role:"})," Calls the Numerix compute engine for operations like reranking."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Uses ",(0,s.jsx)(n.code,{children:"ScoreMapping"})," config to map matrix columns to compute inputs"]}),"\n",(0,s.jsx)(n.li,{children:"Writes a single score column back to the matrix"}),"\n",(0,s.jsx)(n.li,{children:"Supports slate mode for per-slate compute operations"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"feature-retrieval-pipeline",children:"Feature Retrieval Pipeline"}),"\n",(0,s.jsx)(n.h3,{id:"key-resolution",children:"Key Resolution"}),"\n",(0,s.jsxs)(n.p,{children:["Feature components use ",(0,s.jsx)(n.code,{children:"FSKeys"})," configuration to dynamically resolve entity keys:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "FSKeys": {\n        "schema": ["user_id"],\n        "col": "user:profile:user_id"\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The component reads key values from the existing matrix columns, enabling ",(0,s.jsx)(n.strong,{children:"chained entity resolution"})," \u2014 e.g., fetch product entity first, extract category, then fetch user x category features."]}),"\n",(0,s.jsx)(n.h3,{id:"batched-retrieval",children:"Batched Retrieval"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Features are fetched via ",(0,s.jsx)(n.code,{children:"FeatureService.RetrieveFeatures"})," gRPC call"]}),"\n",(0,s.jsx)(n.li,{children:"Requests are batched by unique entity keys"}),"\n",(0,s.jsx)(n.li,{children:"Configurable batch size and deadline per component"}),"\n",(0,s.jsxs)(n.li,{children:["Auth via ",(0,s.jsx)(n.code,{children:"CALLER_ID"})," and ",(0,s.jsx)(n.code,{children:"CALLER_TOKEN"})," metadata"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"in-memory-caching",children:"In-Memory Caching"}),"\n",(0,s.jsx)(n.p,{children:"Optional per-component caching reduces OnFS load:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Cache key: ",(0,s.jsx)(n.code,{children:"model_id:cache_version:component_name:entity_key"})]}),"\n",(0,s.jsx)(n.li,{children:"Configurable TTL per component"}),"\n",(0,s.jsx)(n.li,{children:"Zero-GC-overhead cache implementation available"}),"\n",(0,s.jsx)(n.li,{children:"Cache hit/miss metrics tracked via StatsD"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"data-types",children:"Data Types"}),"\n",(0,s.jsx)(n.p,{children:"Inferflow supports comprehensive ML data types for feature encoding and model input/output:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Data Type"}),(0,s.jsx)(n.th,{children:"Variants"}),(0,s.jsx)(n.th,{children:"Usage"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Integers"})}),(0,s.jsx)(n.td,{children:"int8, int16, int32, int64"}),(0,s.jsx)(n.td,{children:"Categorical encodings, counts, IDs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Floats"})}),(0,s.jsx)(n.td,{children:"float8 (e4m3, e5m2), float16, float32, float64"}),(0,s.jsx)(n.td,{children:"Continuous features, embeddings, scores"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Strings"})}),(0,s.jsx)(n.td,{children:"Variable length"}),(0,s.jsx)(n.td,{children:"Categories, metadata"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Booleans"})}),(0,s.jsx)(n.td,{children:"Bit-packed"}),(0,s.jsx)(n.td,{children:"Binary indicators"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Vectors"})}),(0,s.jsx)(n.td,{children:"All scalar types"}),(0,s.jsx)(n.td,{children:"Embeddings, feature arrays"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Type conversion is handled by the ",(0,s.jsx)(n.code,{children:"datatypeconverter"})," package with optimized float8 implementations."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"inference-logging",children:"Inference Logging"}),"\n",(0,s.jsx)(n.p,{children:"Inferflow supports async inference logging to Kafka for model monitoring and debugging:"}),"\n",(0,s.jsx)(n.h3,{id:"serialization-formats",children:"Serialization Formats"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Format"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Proto"})}),(0,s.jsx)(n.td,{children:"Default, compact"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Arrow"})}),(0,s.jsx)(n.td,{children:"Columnar analytics"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Parquet"})}),(0,s.jsx)(n.td,{children:"Long-term storage, query-friendly"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"sampling-controls",children:"Sampling Controls"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Config"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LoggingPerc"})}),(0,s.jsx)(n.td,{children:"Percentage of requests to log (0-100)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LogBatchSize"})}),(0,s.jsx)(n.td,{children:"Batch size for log message grouping"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LogFeatures"})}),(0,s.jsx)(n.td,{children:"Specific features to include in logs"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"log-content",children:"Log Content"}),"\n",(0,s.jsxs)(n.p,{children:["Each ",(0,s.jsx)(n.code,{children:"InferflowLog"})," message includes:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"user_id"}),", ",(0,s.jsx)(n.code,{children:"tracking_id"}),", ",(0,s.jsx)(n.code,{children:"model_config_id"})]}),"\n",(0,s.jsx)(n.li,{children:"Entity IDs and feature values"}),"\n",(0,s.jsx)(n.li,{children:"Model scores and metadata"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"configuration-hot-reload",children:"Configuration Hot-Reload"}),"\n",(0,s.jsxs)(n.p,{children:["Model configurations are stored in ",(0,s.jsx)(n.strong,{children:"etcd"})," and support ",(0,s.jsx)(n.strong,{children:"live updates without redeployment"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Inferflow registers watchers on etcd config paths"}),"\n",(0,s.jsxs)(n.li,{children:["On config change, watchers trigger ",(0,s.jsx)(n.code,{children:"ReloadModelConfigMapAndRegisterComponents"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ConfigMap"})," is updated in memory"]}),"\n",(0,s.jsx)(n.li,{children:"Feature schemas are re-initialized"}),"\n",(0,s.jsx)(n.li,{children:"DAG components are re-registered"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This enables:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Adding new models in production without restarts"}),"\n",(0,s.jsx)(n.li,{children:"A/B testing with different model configurations"}),"\n",(0,s.jsx)(n.li,{children:"Instant rollback by reverting etcd config"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"performance-characteristics",children:"Performance Characteristics"}),"\n",(0,s.jsx)(n.h3,{id:"concurrency-model",children:"Concurrency Model"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DAG components at the same level execute concurrently in goroutines"}),"\n",(0,s.jsx)(n.li,{children:"Feature retrieval is parallelized across entity types"}),"\n",(0,s.jsx)(n.li,{children:"External gRPC calls use connection pooling"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"memory-efficiency",children:"Memory Efficiency"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Built in Go \u2014 significantly lower memory footprint than Java equivalents (~80% reduction)"}),"\n",(0,s.jsxs)(n.li,{children:["Object pooling for ",(0,s.jsx)(n.code,{children:"ComponentMatrix"})," and serialization buffers"]}),"\n",(0,s.jsx)(n.li,{children:"In-memory cache with zero-GC-overhead option (freecache)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"serialization",children:"Serialization"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"gRPC with Proto3 for all external communication"}),"\n",(0,s.jsxs)(n.li,{children:["Binary feature encoding in the ",(0,s.jsx)(n.code,{children:"ComponentMatrix"})," for minimal overhead"]}),"\n",(0,s.jsx)(n.li,{children:"Configurable compression for Kafka logging"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"contributing",children:"Contributing"}),"\n",(0,s.jsxs)(n.p,{children:["We welcome contributions from the community! Please see our ",(0,s.jsx)(n.a,{href:"https://github.com/Meesho/BharatMLStack/blob/main/CONTRIBUTING.md",children:"Contributing Guide"})," for details on how to get started."]}),"\n",(0,s.jsx)(n.h2,{id:"community--support",children:"Community & Support"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Discord"}),": Join our ",(0,s.jsx)(n.a,{href:"https://discord.gg/XkT7XsV2AU",children:"community chat"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Issues"}),": Report bugs and request features on ",(0,s.jsx)(n.a,{href:"https://github.com/Meesho/BharatMLStack/issues",children:"GitHub Issues"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Email"}),": Contact us at ",(0,s.jsx)(n.a,{href:"mailto:ml-oss@meesho.com",children:"ml-oss@meesho.com"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,s.jsxs)(n.p,{children:["BharatMLStack is open-source software licensed under the ",(0,s.jsx)(n.a,{href:"https://github.com/Meesho/BharatMLStack/blob/main/LICENSE.md",children:"BharatMLStack Business Source License 1.1"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsx)("strong",{children:"Built with \u2764\ufe0f for the ML community from Meesho"})}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsx)("strong",{children:"If you find this useful, \u2b50\ufe0f the repo \u2014 your support means the world to us!"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var r=i(6540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);