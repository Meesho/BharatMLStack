<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Building Meesho‚Äôs ML Platform: Lessons from the First-Gen System (Part 2) | BharatMLStack</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://meesho.github.io/BharatMLStack/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://meesho.github.io/BharatMLStack/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://meesho.github.io/BharatMLStack/blog/post-two"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Building Meesho‚Äôs ML Platform: Lessons from the First-Gen System (Part 2) | BharatMLStack"><meta data-rh="true" name="description" content="BharatMLStack"><meta data-rh="true" property="og:description" content="BharatMLStack"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-04-10T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/singh-bhawani,https://github.com/jigarpatel26,https://github.com/a0d00kc"><meta data-rh="true" property="article:tag" content="inferflow,interaction-store,mlplatform,meesho,bharatmlstack"><link data-rh="true" rel="icon" href="/BharatMLStack/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://meesho.github.io/BharatMLStack/blog/post-two"><link data-rh="true" rel="alternate" href="https://meesho.github.io/BharatMLStack/blog/post-two" hreflang="en"><link data-rh="true" rel="alternate" href="https://meesho.github.io/BharatMLStack/blog/post-two" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://meesho.github.io/BharatMLStack/blog/post-two","mainEntityOfPage":"https://meesho.github.io/BharatMLStack/blog/post-two","url":"https://meesho.github.io/BharatMLStack/blog/post-two","headline":"Building Meesho‚Äôs ML Platform: Lessons from the First-Gen System (Part 2)","name":"Building Meesho‚Äôs ML Platform: Lessons from the First-Gen System (Part 2)","description":"BharatMLStack","datePublished":"2023-04-10T00:00:00.000Z","author":[{"@type":"Person","name":"Bhawani Singh","description":"Architect @ Meesho","url":"https://github.com/singh-bhawani","image":"https://github.com/singh-bhawani.png"},{"@type":"Person","name":"Jigar Dave","description":"Lead Software Engineer @ Meesho","url":"https://github.com/jigarpatel26","image":"https://github.com/jigarpatel26.png"},{"@type":"Person","name":"Adarsha Das","description":"Senior Architect @ Meesho","url":"https://github.com/a0d00kc","image":"https://github.com/a0d00kc.png"}],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://meesho.github.io/BharatMLStack/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/BharatMLStack/blog/rss.xml" title="BharatMLStack RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/BharatMLStack/blog/atom.xml" title="BharatMLStack Atom Feed"><link rel="stylesheet" href="/BharatMLStack/assets/css/styles.05cee957.css">
<script src="/BharatMLStack/assets/js/runtime~main.4585f1ec.js" defer="defer"></script>
<script src="/BharatMLStack/assets/js/main.0b864cc9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="https://github.com/singh-bhawani.png"><link rel="preload" as="image" href="https://github.com/jigarpatel26.png"><link rel="preload" as="image" href="https://github.com/a0d00kc.png"><div class="gradient-bg-global"><div class="gradient-orb-global orb-global-1"></div><div class="gradient-orb-global orb-global-2"></div><div class="gradient-orb-global orb-global-3"></div></div><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/BharatMLStack/"><b class="navbar__title text--truncate">BharatMLStack</b></a><a class="navbar__item navbar__link" href="/BharatMLStack/intro">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/BharatMLStack/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Meesho/BharatMLStack" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/BharatMLStack/blog/post-five">LLM Inference Optimization Techniques: Engineering Sub-Second Latency at Scale</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/BharatMLStack/blog/post-four">Designing a Production-Grade LLM Inference Platform: From Model Weights to Scalable GPU Serving</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/BharatMLStack/blog/post-three">Cracking the Code: Scaling Model Inference &amp; Real-Time Embedding Search</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/BharatMLStack/blog/post-two">Building Meesho‚Äôs ML Platform: Lessons from the First-Gen System (Part 2)</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2022</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/BharatMLStack/blog/post-one">Building Meesho‚Äôs ML Platform: From Chaos to Cutting-Edge (Part 1)</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Building Meesho‚Äôs ML Platform: Lessons from the First-Gen System (Part 2)</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-04-10T00:00:00.000Z">April 10, 2023</time> ¬∑ <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/singh-bhawani" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://github.com/singh-bhawani.png" alt="Bhawani Singh"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/singh-bhawani" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Bhawani Singh</span></a></div><small class="authorTitle_nd0D" title="Architect @ Meesho">Architect @ Meesho</small><div class="authorSocials_rSDt"></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/jigarpatel26" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jigarpatel26.png" alt="Jigar Dave"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/jigarpatel26" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Jigar Dave</span></a></div><small class="authorTitle_nd0D" title="Lead Software Engineer @ Meesho">Lead Software Engineer @ Meesho</small><div class="authorSocials_rSDt"></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/a0d00kc" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://github.com/a0d00kc.png" alt="Adarsha Das"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/a0d00kc" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Adarsha Das</span></a></div><small class="authorTitle_nd0D" title="Senior Architect @ Meesho">Senior Architect @ Meesho</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p><img decoding="async" loading="lazy" alt="BharatMLStack" src="/BharatMLStack/assets/images/bms-7399e8796d2cd24617c432518ce3f312.png" width="1396" height="460" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-meeshos-ml-platform-lessons-from-the-first-gen-system-part-2">Building Meesho‚Äôs ML Platform: Lessons from the First-Gen System (Part 2)<a href="#building-meeshos-ml-platform-lessons-from-the-first-gen-system-part-2" class="hash-link" aria-label="Direct link to Building Meesho‚Äôs ML Platform: Lessons from the First-Gen System (Part 2)" title="Direct link to Building Meesho‚Äôs ML Platform: Lessons from the First-Gen System (Part 2)">‚Äã</a></h2>
<p>By late 2022, we had built something we were truly proud of‚Äîa real-time ML serving system with a DAG-based executor, a feature store, and an interaction store powering key ranking and personalization models. It was a major milestone, the culmination of months of effort from data scientists, ML engineers, and backend teams. Our system was live, and we were ready to push the boundaries of experimentation.
And it worked. Mostly.
But soon, cracks appeared. Every new model needed custom feature retrieval logic, DAGs became dense and unmanageable, and scaling turned into a constant firefight. Costs surged, and infra bottlenecks slowed experimentation. Our system worked, but it wasn‚Äôt built for scale.
This is the story of how we tackled these challenges‚Äîbuilding Inferflow for seamless feature retrieval, optimizing real-time infra, and cutting costs while scaling to millions of QPS.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-cost-of-success">The Cost of Success<a href="#the-cost-of-success" class="hash-link" aria-label="Direct link to The Cost of Success" title="Direct link to The Cost of Success">‚Äã</a></h3>
<p>Every new Ranker model required its own feature set, often pulling from different entities. Each addition meant:</p>
<ul>
<li>Adding new DAG nodes in IOP</li>
<li>Writing custom logic to fetch features from multiple sources (e.g., user, product, user √ó category)</li>
<li>Inferring intermediate features (e.g., extracting category from a product to fetch user √ó category data)</li>
<li>Optimizing I/O and dealing with the inevitable bugs</li>
</ul>
<p>What began as clean DAGs soon turned into a tangled web of cross-dependent graphs. Every experimentation cycle meant new nodes, new dependencies, and slower iterations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-pains-and-cassandras-limits">Scaling Pains (and Cassandra‚Äôs Limits)<a href="#scaling-pains-and-cassandras-limits" class="hash-link" aria-label="Direct link to Scaling Pains (and Cassandra‚Äôs Limits)" title="Direct link to Scaling Pains (and Cassandra‚Äôs Limits)">‚Äã</a></h3>
<p>At some point, we were hitting:</p>
<ul>
<li>250‚Äì300K reads/sec</li>
<li>1M writes/sec (during lean hours)</li>
</ul>
<p>All of this ran on Cassandra. While its distributed architecture had been proven in production, operating large-scale clusters came with considerable infrastructure overhead. Our proof-of-concept (POC) demonstrated throughput of around 100K ops/sec, but as we scaled further, the challenges grew. Ensuring node health, optimizing compaction, and maintaining storage balance became increasingly demanding. We also observed latency spikes under heavy load, alongside a sharp increase in total cost of ownership.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="interaction-store-woes">Interaction Store Woes<a href="#interaction-store-woes" class="hash-link" aria-label="Direct link to Interaction Store Woes" title="Direct link to Interaction Store Woes">‚Äã</a></h3>
<p>Our interaction store was another ticking time bomb:</p>
<ul>
<li>üö® Clusters kept growing in size and cost</li>
<li>üö® Latency spikes became increasingly frequent</li>
<li>üö® The DMC proxy occasionally lost locality of nodes against shards, causing cross-node communication and degraded performance</li>
</ul>
<p>Each time this happened, we had to manually rebalance shards just to restore stable latency, making operations unsustainable at scale.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="silver-linings">Silver Linings<a href="#silver-linings" class="hash-link" aria-label="Direct link to Silver Linings" title="Direct link to Silver Linings">‚Äã</a></h3>
<p>Despite the chaos, the system was live and delivering value:</p>
<ul>
<li>Real-time infrastructure was in production</li>
<li>Costs dropped by 60‚Äì70% compared to offline personalization</li>
<li>New experiments rolled out faster and more successfully</li>
<li>User engagement metrics improved</li>
</ul>
<p>It wasn‚Äôt perfect. It was far from easy. But it worked‚Äîand that counted for a lot.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="round-two-solving-the-top-2-bottlenecks">Round Two: Solving the Top 2 Bottlenecks<a href="#round-two-solving-the-top-2-bottlenecks" class="hash-link" aria-label="Direct link to Round Two: Solving the Top 2 Bottlenecks" title="Direct link to Round Two: Solving the Top 2 Bottlenecks">‚Äã</a></h3>
<p>With the first-gen system stretched to its limits, we stepped back. Conversations with data scientists and backend engineers revealed three recurring pain points:</p>
<ol>
<li>Coding feature retrieval logic for every new model was becoming unsustainable</li>
<li>ML scale was exploding‚Äîbringing rising infra costs with it</li>
<li>Real-time embedding search was the next big unlock</li>
</ol>
<p>We tackled them one by one‚Äîstarting with the biggest pain point.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="problem-1-no-code-feature-retrieval-for-model-inference">Problem 1: No-Code Feature Retrieval for Model Inference<a href="#problem-1-no-code-feature-retrieval-for-model-inference" class="hash-link" aria-label="Direct link to Problem 1: No-Code Feature Retrieval for Model Inference" title="Direct link to Problem 1: No-Code Feature Retrieval for Model Inference">‚Äã</a></h4>
<p>We noticed a pattern: for personalized ranking, models needed features from:</p>
<ul>
<li>‚úÖ Product</li>
<li>‚úÖ User</li>
<li>‚úÖ User √ó Category</li>
<li>‚úÖ Region, cohort, sub-category, etc.</li>
</ul>
<p>A key insight emerged: Entities that contribute features for a model always map back to the context entities.</p>
<p><img decoding="async" loading="lazy" alt="MP Dag" src="/BharatMLStack/assets/images/mp-dag-976ff51caf25f09d977ccc10e70918f3.png" width="1272" height="512" class="img_ev3q"></p>
<p>With this, we designed Inferflow, a graph-driven feature retrieval and model orchestration system:</p>
<ul>
<li>1Ô∏è‚É£ Inferflow takes a modelId and context IDs (e.g., userId, productIds)</li>
<li>2Ô∏è‚É£ Loads a pre-defined feature retrieval graph from ZooKeeper</li>
<li>3Ô∏è‚É£ Executes the graph to resolve entity relationships dynamically</li>
<li>4Ô∏è‚É£ Outputs a 2D matrix of feature vectors</li>
</ul>
<p>üí° The impact?</p>
<ul>
<li>üöÄ No more custom feature retrieval code‚Äîjust graph updates in config</li>
<li>üöÄ Feature consistency across experiments</li>
<li>üöÄ Faster iteration cycles for ranking, fraud detection, and beyond</li>
</ul>
<p>Here‚Äôs a visual example that shows how this graph plays out during execution. We further extended the graph to call multiple models as needed:
<img decoding="async" loading="lazy" alt="MP matrix" src="/BharatMLStack/assets/images/mp-matrix-43994f433f78905ccbd10cfe284f3c9f.png" width="1262" height="768" class="img_ev3q">
We built Inferflow in GoLang, using gRPC and Proto3 serialization for efficiency.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="problem-2-scaling-without-breaking-the-bank">Problem 2: Scaling Without Breaking the Bank<a href="#problem-2-scaling-without-breaking-the-bank" class="hash-link" aria-label="Direct link to Problem 2: Scaling Without Breaking the Bank" title="Direct link to Problem 2: Scaling Without Breaking the Bank">‚Äã</a></h4>
<p>With more ML use cases coming online, we needed to cut costs without compromising performance. We focused on:</p>
<ul>
<li>üîπ Online Feature Store</li>
<li>üîπ Interaction Store</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optimizing-the-online-feature-store">Optimizing the Online Feature Store<a href="#optimizing-the-online-feature-store" class="hash-link" aria-label="Direct link to Optimizing the Online Feature Store" title="Direct link to Optimizing the Online Feature Store">‚Äã</a></h4>
<p>Our costs were concentrated in:</p>
<ul>
<li>üìå Database (Cassandra)</li>
<li>üìå Cache (Redis)</li>
<li>üìå Running Pods (Java services)</li>
</ul>
<p>1Ô∏è‚É£ Replacing Cassandra with ScyllaDB
As we hit the operational limits of large Cassandra clusters, we transitioned to ScyllaDB, which offered a seamless drop-in replacement without major code changes. The switch brought significant benefits:</p>
<ul>
<li>Throughput: Matched or exceeded Cassandra&#x27;s performance under identical workloads, even under high concurrency.</li>
<li>Latency: Achieved consistently lower P99 latencies due to ScyllaDB&#x27;s shard-per-core architecture and better I/O utilization.</li>
<li>Cost Efficiency: Reduced infra footprint by ~70% through better CPU and memory efficiency, eliminating the need for over-provisioned nodes.</li>
</ul>
<p>2Ô∏è‚É£ Finding the Right Cache
To reduce backend load and improve response times, we benchmarked multiple caching solutions‚ÄîMemcached, KeyDB, and Dragonfly‚Äîunder real production traffic patterns. Dragonfly stood out due to its robust architecture and operational simplicity:</p>
<ul>
<li>Data Skew Handling: Efficiently managed extreme key hotness and uneven access patterns without performance degradation.</li>
<li>Throughput: Delivered consistently high throughput, even with large object sizes and concurrent access.</li>
<li>Ease of Adoption: Acted as a drop-in Redis replacement with full protocol compatibility‚Äîno changes needed in application code or client libraries.</li>
</ul>
<p>3Ô∏è‚É£ Moving to GoLang for Cost-Efficient Serving
Java services were memory-heavy‚Äîso we rewrote core services in GoLang. The results?</p>
<p>‚úÖ Memory usage dropped by ~80%
‚úÖ CPU utilization was significantly lower
‚úÖ Faster, more efficient deployments</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optimizing-the-interaction-store">Optimizing the Interaction Store<a href="#optimizing-the-interaction-store" class="hash-link" aria-label="Direct link to Optimizing the Interaction Store" title="Direct link to Optimizing the Interaction Store">‚Äã</a></h4>
<p>We realized that we only need a user‚Äôs interaction data in Redis when they open the app. So, we implemented a tiered storage approach:</p>
<ul>
<li>üìå Cold Tier (ScyllaDB)‚ÄîStores click, order, wishlist events</li>
<li>üìå Hot Tier (Redis)‚ÄîLoads a user‚Äôs past interactions only when they open the app</li>
</ul>
<p>Smart Offloading: We introduced an inactivity tracker to detect when a user session ends. At that point, Redis data was flushed back to Scylla, reducing unnecessary writes.</p>
<p><img decoding="async" loading="lazy" alt="InteractionStore" src="/BharatMLStack/assets/images/interaction-str-d9e7aefea121aefb4e94c6c9f060d016.png" width="1242" height="572" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="results">Results<a href="#results" class="hash-link" aria-label="Direct link to Results" title="Direct link to Results">‚Äã</a></h4>
<ul>
<li>Online Feature Store hit 1M QPS for the first time during the 2023 Mega Blockbuster Sale‚Äîwithout breaking a sweat</li>
<li>Infra costs for Online Feature Store and Interaction Store dropped by ~60%</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-catch-our-ml-hosting-hit-a-hard-limit">The Catch: Our ML Hosting Hit a Hard Limit<a href="#the-catch-our-ml-hosting-hit-a-hard-limit" class="hash-link" aria-label="Direct link to The Catch: Our ML Hosting Hit a Hard Limit" title="Direct link to The Catch: Our ML Hosting Hit a Hard Limit">‚Äã</a></h4>
<p>While planning for 2023 MBS, we ran into a critical scalability bottleneck:</p>
<ul>
<li>‚ùå Insufficient compute availability in our region for ML instances</li>
<li>‚ùå Couldn‚Äôt provision enough nodes to handle real-time inference at scale</li>
</ul>
<p>This forced us to rethink where and how we hosted our models. The existing setup was great for prototyping‚Äîbut it wasn‚Äôt built to handle the bursty, high-QPS demands of real-world production workloads.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion-from-firefighting-to-future-proofing">Conclusion: From Firefighting to Future-Proofing<a href="#conclusion-from-firefighting-to-future-proofing" class="hash-link" aria-label="Direct link to Conclusion: From Firefighting to Future-Proofing" title="Direct link to Conclusion: From Firefighting to Future-Proofing">‚Äã</a></h3>
<p>What started as an ambitious experiment turned into a real-time ML infrastructure that powered millions of requests per second. We battled scaling pains, rethought feature retrieval with Inferflow, and rebuilt our infra stack for efficiency‚Äîdriving down costs while improving experimentation velocity.
But new challenges emerged. Our infrastructure could now handle scale, but our ML model hosting setup hit a hard limit. With compute availability bottlenecks threatening real-time inference, we faced a critical decision: how do we make model serving as scalable and cost-efficient as the rest of our stack? That‚Äôs the next piece of the puzzle‚Äîand the story of Part 3.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/BharatMLStack/blog/tags/inferflow">inferflow</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/BharatMLStack/blog/tags/interaction-store">interaction-store</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/BharatMLStack/blog/tags/mlplatform">mlplatform</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/BharatMLStack/blog/tags/meesho">meesho</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/BharatMLStack/blog/tags/bharatmlstack">bharatmlstack</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/Meesho/BharatMLStack/tree/main/docs/blog/bharatmlstack-history/post-two/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/BharatMLStack/blog/post-three"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Cracking the Code: Scaling Model Inference &amp; Real-Time Embedding Search</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/BharatMLStack/blog/post-one"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Building Meesho‚Äôs ML Platform: From Chaos to Cutting-Edge (Part 1)</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#building-meeshos-ml-platform-lessons-from-the-first-gen-system-part-2" class="table-of-contents__link toc-highlight">Building Meesho‚Äôs ML Platform: Lessons from the First-Gen System (Part 2)</a><ul><li><a href="#the-cost-of-success" class="table-of-contents__link toc-highlight">The Cost of Success</a></li><li><a href="#scaling-pains-and-cassandras-limits" class="table-of-contents__link toc-highlight">Scaling Pains (and Cassandra‚Äôs Limits)</a></li><li><a href="#interaction-store-woes" class="table-of-contents__link toc-highlight">Interaction Store Woes</a></li><li><a href="#silver-linings" class="table-of-contents__link toc-highlight">Silver Linings</a></li><li><a href="#round-two-solving-the-top-2-bottlenecks" class="table-of-contents__link toc-highlight">Round Two: Solving the Top 2 Bottlenecks</a></li><li><a href="#conclusion-from-firefighting-to-future-proofing" class="table-of-contents__link toc-highlight">Conclusion: From Firefighting to Future-Proofing</a></li></ul></li></ul></div></div></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Meesho/BharatMLStack/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github Discussions<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discord.gg/XkT7XsV2AU" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/BharatMLStack/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/Meesho/BharatMLStack" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2026 Meesho Ltd. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>