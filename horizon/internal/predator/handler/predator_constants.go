package handler

const (
	OnboardRequestType                = "Onboard"
	ScaleUpRequestType                = "ScaleUp"
	PromoteRequestType                = "Promote"
	EditRequestType                   = "Edit"
	DeleteRequestType                 = "Delete"
	configFile                        = "config.pbtxt"
	pendingApproval                   = "Pending Approval"
	slashConstant                     = "/"
	gcsPrefix                         = "gs://"
	adminRole                         = "admin"
	typeString                        = "TYPE_STRING"
	bytesKeys                         = "BYTES"
	typePrefix                        = "TYPE_"
	errMsgFetchConfigs                = "failed to fetch predator configs: %w"
	errMsgParsePayload                = "failed to parse payload for request ID %d: %w"
	cpuRequestKey                     = "cpu_request"
	cpuLimitKey                       = "cpu_limit"
	memRequestKey                     = "mem_request"
	memLimitKey                       = "mem_limit"
	gpuRequestKey                     = "gpu_request"
	gpuLimitKey                       = "gpu_limit"
	minReplicaKey                     = "min_replica"
	maxReplicaKey                     = "max_replica"
	nodeSelectorKey                   = "node_selector"
	statusFailed                      = "Failed"
	statusInProgress                  = "In Progress"
	errMsgMarshalMeta                 = "Failed to marshal metadata"
	errMsgInsertConfig                = "Failed to insert predator_config"
	errMsgInsertDiscovery             = "Failed to insert service discovery"
	errMsgCreateConnection            = "Error in creating connection"
	errMsgTypeAssertion               = "failed to cast connection to *infra.SQLConnection"
	errMsgTypeAssertionLog            = "Type assertion error"
	errMsgCreateRequestRepo           = "Error in creating predator request repository"
	errMsgCreateDeployableRepo        = "Error in creating service deployable repository"
	errMsgCreateConfigRepo            = "Error in creating predator config repository"
	errMsgCreateDiscoveryRepo         = "Error in creating service discovery repository"
	errMsgCreateGroupIdCounterRepo    = "Error in creating group id counter repository"
	errMsgProcessPayload              = "failed to process payload"
	errMsgCreateRequestFormat         = "could not create %s request"
	successMsgFormat                  = "Model %s Request Raised Successfully."
	fieldModelName                    = "model_name"
	statusPendingApproval             = "Pending Approval"
	errModelNotFound                  = "model not found"
	errFetchDiscoveryConfig           = "failed to fetch service discovery config"
	errFetchDeployableConfig          = "failed to fetch service deployable config"
	errUnmarshalDeployableConfig      = "failed to unmarshal service deployable config"
	errMarshalPayload                 = "failed to marshal payload"
	errCreateDeleteRequest            = "could not create delete request"
	successDeleteRequestMsg           = "Model deletion request raised successfully"
	fieldModelSourcePath              = "model_source_path"
	fieldMetaData                     = "meta_data"
	fieldDiscoveryConfigID           = "discovery_config_id"
	fieldConfigMapping                = "config_mapping"
	errReadConfigFileFormat           = "failed to read config.pbtxt: %v"
	errUnmarshalProtoFormat           = "failed to unmarshal proto text: %v"
	errNoInstanceGroup                = "no instance group defined in model config"
	errModelPathPrefix                = "model_path must be provided and start with /"
	errModelPathFormat                = "invalid model_path format. Expected: /bucket/path/to/model"
	errModelNameMissing               = "model name is missing in config"
	errMaxBatchSizeMissing            = "max_batch_size is missing or zero in config"
	errBackendMissing                 = "backend is missing in config"
	errNoInputDefinitions             = "no input definitions found in config"
	errNoOutputDefinitions           = "no output definitions found in config"
	errInstanceGroupMissing           = "instance group is missing in config"
	errInvalidRequestIDFormat         = "invalid group ID format"
	errFailedToFetchRequest           = "failed to fetch request for group id %s"
	errInvalidRequestType             = "invalid request type"
	statusApproved                    = "Approved"
	statusRejected                    = "Rejected"
	errInvalidGcsBucketPath           = "invalid gcs bucket path format for source or destination"
	errFailedToUpdateRequest          = "Failed to update request status"
	successRejectMessage              = "Request %d rejected successfully.\n"
	errFailedToFindServiceDiscovery   = "Failed to find service discovery entry"
	errFailedToUpdateServiceDiscovery = "Failed to update service discovery to inactive"
	errFailedToFindPredatorConfig     = "Failed to find predator config entry"
	errFailedToUpdatePredatorConfig   = "Failed to update predator config to inactive"

	errFailedToParsePayload                    = "Failed to parse payload"
	errChildModelNotInDeleteRequest            = "ensemble model %s has child model %s which is not included in the delete request"
	errChildModelDifferentDeployable           = "ensemble model %s and its child model %s belong to different deployables (ensemble: %d, child: %d)"
	errFailedToFetchDiscoveryConfigForModel    = "failed to fetch discovery config for model %s: %w"
	errFailedToFetchDiscoveryConfigForEnsemble = "failed to fetch discovery config for ensemble model %s: %w"
	errFailedToFetchDiscoveryConfigForChild    = "failed to fetch discovery config for child model %s: %w"
	errDuplicateModelNameInDeployable          = "duplicate model name %s found within deployable %d"
	errNormalModelIsChildOfEnsemble            = "model %s is a child of ensemble model %s in the same deployable %d, but ensemble is not included in delete request"
	errEnsembleMissingChild                    = "ensemble model %s has child model %s which is not included in the delete request"
	errChildMissingEnsemble                    = "child model %s is included in delete request but its parent ensemble model %s is not included"
	errFailedToFindServiceDeployableEntry      = "Failed to find service deployable entry"
	errFailedToOperateGcsCloneStage            = "Failed to operate gcs clone stage"
	errFailedToRestartDeployable               = "Failed to restart deployable"
	errGCSCopyFailed                           = "GCS copy failed"
	errFailedToUpdateRequestStatusAndStage     = "Failed to update request status and stage %s"
	onboardRequestFlow                         = "Onboard request"
	cloneRequestFlow                           = "Clone request"
	promoteRequestFlow                         = "Promote request"
	predatorStageRestartDeployable             = "Restart Deployable"
	predatorStagePending                       = "Pending"
	machineTypeKey                             = "machine_type"
	cpuThresholdKey                            = "cpu_threshold"
	gpuThresholdKey                            = "gpu_threshold"
	tritonImageTagKey                          = "triton_image_tag"
	basePathKey                                = "base_path"
	predatorStageCloneToBucket                 = "Clone To Bucket"
	predatorStageDBPopulation                  = "DB Population"
	predatorStageRequestPayloadError           = "Request Payload Error"
	serviceDeployableNotFound                  = "ServiceDeployable not found"
	failedToParseServiceConfig                 = "Failed to parse service config"
	failedToCreateServiceDiscoveryAndConfig    = "Failed to create service discovery and config"
	predatorInferMethod                        = "inference.GRPCInferenceService/ModelInfer"
	deployableTagDelimiter                     = "_"
	scaleupTag                                 = "scaleup"
)
